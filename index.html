<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YASH AI</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #f2f2f2, #ffffff);
      color: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .container {
      width: 100%;
      max-width: 400px;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
      padding: 20px;
    }
    .header {
      text-align: center;
      margin-bottom: 10px;
    }
    select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    .prediction {
      margin: 20px 0;
      text-align: center;
    }
    .prediction span {
      font-size: 28px;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 10px;
      background-color: #e0e0e0;
    }
    .buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .buttons button {
      width: 48%;
    }
    .timer, .period {
      text-align: center;
      margin-top: 5px;
      font-size: 14px;
      color: #666;
    }
    .clear-btn {
      margin-top: 10px;
      background-color: #ffcccc;
      color: #900;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h2>WinGo 1M Predictor</h2>
      <div class="period" id="period">Period: Loading...</div>
      <div class="timer" id="timer">00:60</div>
    </div><div>
  <select id="gameSelect">
    <option>DMWin</option>
    <option>TashanWin</option>
    <option>BDG Game</option>
    <option>BDG Win</option>
    <option>Tiranga</option>
    <option>DiuWin</option>
    <option>91 Club</option>
  </select>
</div>

<div class="prediction">
  <div>Prediction:</div>
  <span id="prediction">Loading...</span>
</div>

<div class="buttons">
  <button id="winBtn">WIN</button>
  <button id="lossBtn">LOSS</button>
</div>

<button class="clear-btn" id="clearBtn">Clear</button>

  </div>  <script>
    const predictionEl = document.getElementById('prediction');
    const periodEl = document.getElementById('period');
    const timerEl = document.getElementById('timer');
    const gameSelect = document.getElementById('gameSelect');
    const winBtn = document.getElementById('winBtn');
    const lossBtn = document.getElementById('lossBtn');
    const clearBtn = document.getElementById('clearBtn');

    // Keep selected game on refresh
    if (localStorage.getItem('selectedGame')) {
      gameSelect.value = localStorage.getItem('selectedGame');
    }

    gameSelect.addEventListener('change', () => {
      localStorage.setItem('selectedGame', gameSelect.value);
    });

    let lastPrediction = '';

    function fetchPrediction() {
      fetch('https://h5.ar-lottery01.com/api/Lottery/GetGameResultList?gameCode=WinGo_1M&pageNo=1&pageSize=10')
        .then(res => res.json())
        .then(data => {
          const results = data.data.list.map(item => parseInt(item.number));
          const current = results[0];
          const bigCount = results.filter(n => n >= 5).length;
          const smallCount = results.filter(n => n < 5).length;

          let prediction = '';
          if (bigCount > smallCount) prediction = 'SMALL';
          else if (smallCount > bigCount) prediction = 'BIG';
          else prediction = current >= 5 ? 'SMALL' : 'BIG';

          lastPrediction = prediction;
          predictionEl.innerText = prediction;
        })
        .catch(() => {
          predictionEl.innerText = lastPrediction || 'Loading...';
        });
    }

    function updatePeriod() {
      const now = new Date();
      const utc = new Date(now.getTime() + now.getTimezoneOffset() * 60000);
      const seconds = utc.getSeconds();
      const minutes = utc.getMinutes();
      const totalMinutes = utc.getUTCHours() * 60 + minutes;
      const periodNum = 10001 + totalMinutes;
      const formattedPeriod = utc.getFullYear().toString() +
        (utc.getMonth() + 1).toString().padStart(2, '0') +
        utc.getDate().toString().padStart(2, '0') + '1000' + periodNum;
      const remaining = 60 - seconds;
      periodEl.innerText = 'Period: ' + formattedPeriod;
      timerEl.innerText = `00:${remaining.toString().padStart(2, '0')}`;
    }

    clearBtn.addEventListener('click', () => {
      predictionEl.innerText = 'Loading...';
      lastPrediction = '';
    });

    // Win/Loss Buttons - Optional Styling Only
    winBtn.addEventListener('click', () => {
      winBtn.style.background = '#b2fab4';
      lossBtn.style.background = '';
    });

    lossBtn.addEventListener('click', () => {
      lossBtn.style.background = '#ffb2b2';
      winBtn.style.background = '';
    });

    setInterval(fetchPrediction, 5000);
    setInterval(updatePeriod, 1000);
    fetchPrediction();
    updatePeriod();
  </script></body>
  </html>
